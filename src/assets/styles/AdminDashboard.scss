// src/assets/styles/AdminDashboard.scss

// --- Variables (Assuming these are in _variables.scss and imported) ---
$primary-color: #3498db;
$sidebar-bg: #2c3e50;
$sidebar-text-color: #ecf0f1;
$sidebar-active-bg: #34495e;
$sidebar-hover-bg: #3b5168;

$header-bg: #ffffff;
$header-text-color: #333;
$header-border-color: #e8e8e8;

$content-bg: #f0f2f5;
$card-bg: #ffffff;
$card-shadow: 0 2px 8px rgba(0, 0, 0, 0.09);

$text-primary: #2c3e50;
$text-secondary: #576574;
$error-text: #c0392b;

$font-family-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
  Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
$font-size-sm: 0.875rem;

$sidebar-width-desktop: 260px;
$sidebar-width-mobile-open: 240px;
$header-height: 60px;

$bp-md: 768px;

$transition-speed: 0.3s;
$transition-easing: ease-in-out;
// --- End Variables ---


// --- Main Layout ---
.dashboard-layout {
  display: flex;
  min-height: 100vh;
  background-color: $content-bg;
  font-family: $font-family-sans;
  position: relative; // For overlaying sidebar on mobile

  // --- Main Content Area ---
  .main-content-Admin {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    margin-left: $sidebar-width-desktop;
    transition: margin-left $transition-speed $transition-easing;
    overflow-x: hidden;
    width: calc(100% - #{$sidebar-width-desktop});

    .page-content-wrapper { // Wrapper for the content from <Outlet />
      // The fixed header is 60px high. Add some extra space.
      padding: $header-height + 24px 24px 24px 24px;
      flex-grow: 1;
      overflow-y: auto;
    }
  }

  // --- Header ---
  .Admin-header {
    background-color: $header-bg;
    color: $header-text-color;
    height: $header-height;
    padding: 0 24px;
    display: flex;
    align-items: center;
    justify-content: space-between; // Works perfectly with the new structure
    border-bottom: 1px solid $header-border-color;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);

    position: fixed;
    top: 0;
    left: $sidebar-width-desktop;
    right: 0;
    z-index: 990;
    transition: left $transition-speed $transition-easing;

    .header-left, .header-right {
      display: flex;
      align-items: center;
      gap: 1rem; // Adds nice spacing between items in the group
    }

    h1 {
      margin: 0;
      font-size: 1.3rem;
      font-weight: 600;
      color: $text-primary;
    }
    
    .sub-header, .header-summary {
      font-size: $font-size-sm;
      color: $text-secondary;
    }

    .header-summary {
      strong {
        color: $text-primary;
        font-weight: 600;
      }
      .error-detail {
        font-size: 0.75rem;
        color: $error-text;
      }
    }
  }

  // --- Hamburger Menu Icon ---
  .hamburger-menu {
    display: none; // Hidden on desktop by default
    background: none;
    border: none;
    cursor: pointer;
    padding: 10px;
    z-index: 1050;

    span {
      display: block;
      width: 25px;
      height: 3px;
      background-color: $header-text-color;
      margin: 5px 0;
      transition: all $transition-speed $transition-easing;
      border-radius: 3px;
    }

    &.open {
      span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
      span:nth-child(2) { opacity: 0; }
      span:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }
    }
  }

  // --- Sidebar Visibility States ---
  &.sidebar-hidden {
    .main-content-Admin {
      margin-left: 0;
      width: 100%;
    }
    .Admin-header {
      left: 0;
    }
    // Assumes AdminSidebar.scss hides the sidebar on desktop when this class is present
    // e.g., .admin-sidebar { transform: translateX(-100%); }
  }
}


// --- Responsive Adjustments ---
@media (max-width: ($bp-md - 1px)) {
  .dashboard-layout {
    .hamburger-menu {
      display: block; // Show hamburger on mobile
    }

    /* --- KEY ADDITIONS FOR MOBILE SIDEBAR --- */
    // This is the crucial part that was missing.
    // It defines how the sidebar behaves on mobile screens.
    .admin-sidebar {
      position: fixed; // Makes it an overlay that floats above content
      top: 0;
      left: 0;
      bottom: 0;
      z-index: 1000; // High z-index to be on top
      width: $sidebar-width-mobile-open;
      transform: translateX(-100%); // Start fully hidden to the left
      transition: transform $transition-speed $transition-easing;
      // This style assumes your SidebarAdmin component has a root class of "admin-sidebar"
    }

    // When the layout has the "sidebar-visible" class...
    &.sidebar-visible {
      // Slide the sidebar into view
      .admin-sidebar {
        transform: translateX(0);
        box-shadow: 3px 0 15px rgba(0,0,0,0.2);
      }
      // Add a dimming overlay to the main content for better focus
      .main-content-Admin::after {
        content: '';
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background-color: rgba(0,0,0,0.5);
        z-index: 995; // Positioned between sidebar and header
      }
    }
    /* --- END KEY ADDITIONS --- */


    // On mobile, the main content always takes the full width
    .main-content-Admin {
      margin-left: 0 !important;
      width: 100% !important;

      .page-content-wrapper {
        padding: $header-height + 15px 15px 15px 15px; // Reduced padding
      }
    }

    .Admin-header {
      left: 0 !important;
      padding: 0 15px;
      gap: 0.5rem;

      .header-left {
        gap: 0.5rem; // Less space on mobile
      }
      
      h1 {
        font-size: 1.1rem;
      }
      
      // Hide extra details on small screens to save space
      .sub-header, .header-summary {
        display: none;
      }
    }
  }
}