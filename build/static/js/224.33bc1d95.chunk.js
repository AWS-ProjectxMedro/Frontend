"use strict";(self.webpackChunkthecapitaltree=self.webpackChunkthecapitaltree||[]).push([[224],{1256:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(5043),l=a(3216),s=a(5475),r=a(7956),o=a(184),i=a(579);const d=e=>{let{onLogout:t}=e;const[a,d]=(0,n.useState)(!1),c=(0,l.Zp)(),u=()=>{d(!a)},h=()=>{a&&d(!1)};return(0,n.useEffect)((()=>{if(a){const e=()=>d(!1);return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}}),[a]),(0,i.jsxs)("div",{className:"dashboard-container-wrapper "+(a?"mobile-sidebar-open":""),children:[(0,i.jsx)("button",{className:"dashboard__sidebar-toggle",onClick:u,"aria-label":"Toggle navigation","aria-expanded":a,children:a?(0,i.jsx)(o.QCr,{}):(0,i.jsx)(o.OXb,{})}),(0,i.jsxs)("aside",{className:"dashboard__sidebar "+(a?"is-open":""),children:[(0,i.jsxs)("div",{className:"dashboard__sidebar-logo",children:[(0,i.jsx)("img",{src:r,alt:"logo",height:"50px",width:"50px"}),(0,i.jsx)("h2",{className:"dashboard__sidebar-title",children:"Dashboard"})]}),(0,i.jsxs)("ul",{className:"dashboard__sidebar-menu",children:[(0,i.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,i.jsx)(s.k2,{to:"/dashboard",end:!0,onClick:h,className:e=>{let{isActive:t}=e;return t?"dashboard__sidebar-menu-item--active":""},children:"Dashboard"})}),(0,i.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,i.jsx)(s.k2,{to:"/dashboard/investmenttools",onClick:h,className:e=>{let{isActive:t}=e;return t?"dashboard__sidebar-menu-item--active":""},children:"Investment Tool"})}),(0,i.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,i.jsx)(s.k2,{to:"/dashboard/marketguides",onClick:h,className:e=>{let{isActive:t}=e;return t?"dashboard__sidebar-menu-item--active":""},children:"Market Guides"})}),(0,i.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,i.jsx)(s.k2,{to:"/dashboard/profile",onClick:h,className:e=>{let{isActive:t}=e;return t?"dashboard__sidebar-menu-item--active":""},children:"Profile"})}),(0,i.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,i.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),h(),c("/dashboard/payment",{state:{isManualPayment:!0,purchaseDetails:null}})},className:"dashboard__sidebar-menu-link",children:"Payment"})}),(0,i.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,i.jsx)(s.k2,{to:"/dashboard/withdrawal",onClick:h,className:e=>{let{isActive:t}=e;return t?"dashboard__sidebar-menu-item--active":""},children:"Withdrawal"})}),(0,i.jsx)("li",{className:"dashboard__sidebar-signout",onClick:()=>{"function"===typeof t?t():(console.error("Sidebar: onLogout prop is missing or not a function!"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),window.location.href="/login"),h()},style:{cursor:"pointer"},children:"Sign Out"})]})]}),a&&(0,i.jsx)("div",{className:"dashboard__sidebar-overlay",onClick:u})]})}},2843:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var n=a(5043),l=a(3216),s=a(5239),r=a.n(s),o=a(6213);const i=e=>{const[t,a]=(0,n.useState)(null),[l,s]=(0,n.useState)(!1),[r,i]=(0,n.useState)(null);return{data:t,loading:l,error:r,makeRequest:(0,n.useCallback)((async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(!0),i(null),a(null),console.log("[useFetchData - Axios] Attempting to fetch from URL:",t),console.log("[useFetchData - Axios] Auth token present:",!!e);const l={Accept:"application/json",...n.headers};e&&(l.Authorization=`Bearer ${e}`);try{const e=await(0,o.A)({url:t,method:n.method||"GET",headers:l,data:n.data,params:n.params,...n});console.log("[useFetchData - Axios] Response Status:",e.status),console.log("[useFetchData - Axios] Response Content-Type:",e.headers["content-type"]),a(e.data),console.log("[useFetchData - Axios] Successfully received and parsed response.")}catch(r){if(console.error("[useFetchData - Axios] Error during request:",r),r.response){console.error("[useFetchData - Axios] Server Error Data:",r.response.data),console.error("[useFetchData - Axios] Server Error Status:",r.response.status),console.error("[useFetchData - Axios] Server Error Headers:",r.response.headers);let e=`Request failed with status ${r.response.status}.`;if(r.response.data)if("string"===typeof r.response.data&&r.response.data.toLowerCase().includes("<!doctype html>")){e+=` Server returned an HTML page (e.g., "Cannot GET ${r.config.url.replace(r.config.baseURL||"","")}"). Check backend routing.`;const t=r.response.data.match(/<pre>([\s\S]*?)<\/pre>/i);t&&t[1]&&(e+=` Specific error: ${t[1]}`)}else r.response.data.message?e+=` Message: ${r.response.data.message}`:r.response.data.error?e+=` Error: ${r.response.data.error}`:"object"===typeof r.response.data&&(e+=` Details: ${JSON.stringify(r.response.data)}`);i(e)}else r.request?(console.error("[useFetchData - Axios] No response received:",r.request),i("No response received from server. Check network or server status.")):(console.error("[useFetchData - Axios] Error setting up request:",r.message),i(`Error setting up request: ${r.message}`))}finally{s(!1)}}),[e]),clear:()=>{a(null),i(null)}}},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t,a]=(0,n.useState)({startIndex:null,endIndex:null}),l=(0,n.useCallback)((()=>{a({startIndex:null,endIndex:null})}),[]);(0,n.useEffect)((()=>{const a=a=>{if("Escape"===a.key&&(null!==t.startIndex||null!==t.endIndex)){const a=0===t.startIndex&&t.endIndex===Math.max(0,e.length-1),n=null===t.startIndex&&null===t.endIndex;a||n||l()}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)}),[t,e,l]);const s=(0,n.useCallback)((t=>{t?0===t.startIndex&&t.endIndex===e.length-1&&e.length>0?l():a({startIndex:t.startIndex,endIndex:t.endIndex}):l()}),[e.length,l]),r=(0,n.useCallback)((n=>{if(!e||0===e.length||!n.currentTarget)return;n.preventDefault();const{startIndex:s,endIndex:r}=t,o=null===s?0:s,i=null===r?e.length-1:r,d=n.currentTarget.getBoundingClientRect(),c=n.clientX-d.left,u=Math.max(0,Math.min(1,c/d.width)),h=o+u*(i-o),m=n.deltaY<0?.85:1.15,p=i-o+1;let x=p*m;const g=Math.min(10,e.length);if(m<1){if(p<=g)return void a({startIndex:o,endIndex:i});x=Math.max(x,g)}else x=Math.min(x,e.length);let b=Math.round(h-u*x),y=Math.round(b+x-1);b<0&&(b=0,y=Math.min(e.length-1,b+Math.round(x)-1)),y>=e.length&&(y=e.length-1,b=Math.max(0,y-Math.round(x)+1)),b<0&&(b=0);if(y-b+1<g&&e.length>=g)if(0===b)y=Math.min(e.length-1,b+g-1);else if(y===e.length-1)b=Math.max(0,y-g+1);else{const t=Math.round((b+y)/2);b=Math.max(0,t-Math.floor((g-1)/2)),y=Math.min(e.length-1,b+g-1),y===e.length-1&&(b=Math.max(0,y-g+1))}if(b<0||y>=e.length||b>y)return console.warn("Wheel zoom resulted in invalid domain after correction:",{newStartIndex:b,newEndIndex:y,chartDataLength:e.length}),void l();0===b&&y===e.length-1?l():a({startIndex:b,endIndex:y})}),[e,t,l]);return{brushDomain:t,handleBrushUpdate:s,handleWheelZoom:r,resetZoom:l,setBrushDomain:a}};var c=a(579);const u=e=>{let{title:t,data:a,type:n="object"}=e;return a?(0,c.jsxs)("div",{className:"data-card",children:[t&&(0,c.jsx)("h4",{children:t}),"object"===n&&(0,c.jsx)("ul",{children:Object.entries(a).map((e=>{let[t,a]=e;if(null===a||void 0===a)return null;let n=String(a);return"number"===typeof a&&(n=Number.isInteger(a)?a.toLocaleString():parseFloat(a.toFixed(4)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4})),t.toLowerCase().includes("percent")&&"string"===typeof a&&a.includes("%")&&(n=a),(0,c.jsxs)("li",{children:[(0,c.jsxs)("strong",{children:[t.replace(/^[0-9]+\.\s*/,"").replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),":"]})," ",(0,c.jsx)("span",{children:n})]},t)}))})]}):null},h=e=>{let{data:t,columns:a,itemsPerPage:l=10,title:s}=e;const[r,o]=(0,n.useState)(1),[i,d]=(0,n.useState)({key:null,direction:"ascending"}),u=(0,n.useMemo)((()=>{if(!t)return[];let e=[...t];return null!==i.key&&e.sort(((e,t)=>{const a=e[i.key],n=t[i.key];return null===a||void 0===a?1:null===n||void 0===n?-1:a<n?"ascending"===i.direction?-1:1:a>n?"ascending"===i.direction?1:-1:0})),e}),[t,i]),h=(0,n.useMemo)((()=>{const e=(r-1)*l;return u.slice(e,e+l)}),[u,r,l]),m=t?Math.ceil(t.length/l):0;return t&&0!==t.length?(0,c.jsxs)("div",{className:"data-table-container",children:[s&&(0,c.jsx)("h3",{children:s}),(0,c.jsxs)("table",{className:"data-table",children:[(0,c.jsx)("thead",{children:(0,c.jsx)("tr",{children:a.map((e=>{return(0,c.jsxs)("th",{onClick:()=>!1!==e.sortable&&(e=>{let t="ascending";i.key===e&&"ascending"===i.direction&&(t="descending"),d({key:e,direction:t}),o(1)})(e.accessor),className:!1!==e.sortable?"sortable":"",children:[e.Header,!1!==e.sortable&&(t=e.accessor,i.key===t?"ascending"===i.direction?" \u25b2":" \u25bc":"")]},e.accessor);var t}))})}),(0,c.jsx)("tbody",{children:h.map(((e,t)=>(0,c.jsx)("tr",{children:a.map((a=>{const n=e[a.accessor];if(a.Cell){const l={value:n,row:{original:e},column:a};return(0,c.jsx)("td",{children:a.Cell(l)},`${t}-${a.accessor}`)}return(0,c.jsx)("td",{children:"number"===typeof n?Number.isInteger(n)?n.toLocaleString():parseFloat(n.toFixed(4)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4}):n||"-"},`${t}-${a.accessor}`)}))},t)))})]}),m>1&&(0,c.jsxs)("div",{className:"pagination",children:[(0,c.jsx)("button",{onClick:()=>o((e=>Math.max(1,e-1))),disabled:1===r,children:"Previous"}),(0,c.jsxs)("span",{children:["Page ",r," of ",m]}),(0,c.jsx)("button",{onClick:()=>o((e=>Math.min(m,e+1))),disabled:r===m,children:"Next"})]})]}):(0,c.jsxs)("p",{className:"no-data-message",children:[s?`${s}: `:"","No data available."]})},m=()=>(0,c.jsx)("div",{className:"spinner-overlay",children:(0,c.jsx)("div",{className:"spinner"})}),p=e=>{let{message:t}=e;return(0,c.jsx)("div",{className:"error-message",children:(0,c.jsxs)("p",{children:["Error: ",t]})})},x=e=>{let{fields:t,onSubmit:a,buttonText:n="Fetch Data",isLoading:l}=e;return(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault();const n={};t.forEach((t=>{n[t.name]=e.target[t.name].value})),a(n)},className:"input-form",children:[t.map((e=>(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{htmlFor:e.name,children:[e.label,":"]}),(0,c.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,defaultValue:e.defaultValue||"",placeholder:e.placeholder||e.label,required:!1!==e.required})]},e.name))),(0,c.jsx)("button",{type:"submit",disabled:l,children:l?"Fetching...":n})]})};var g=a(1256),b=a(5748),y=a(168),v=a(108),j=a(7734),f=a(2185),C=a(6026),N=a(6150),k=a(1327),S=a(9600),D=a(8729),w=a(7943),A=a(8643),I=a(7869),$=a(3156);const L=e=>{let{chartType:t,displayedChartData:a,chartData:l,brushDomain:s,onBrushUpdate:o,onWheelZoom:i,chartBaseTitle:d,symbol:u,onScreenshot:h,onBuyNow:m,candlestickShapeComponent:p,customLineTooltipComponent:x,customCandlestickTooltipComponent:g}=e;const L=(0,n.useRef)(null);if("none"===t||!a||0===a.length||"function"!==typeof p||"function"!==typeof x||"function"!==typeof g)return null;const _=e=>e?new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"}):"",F={dataKey:"date",tickFormatter:_,angle:-45,textAnchor:"end",height:70,interval:"preserveStartEnd"},T={dataKey:"date",height:30,stroke:"#8884d8",tickFormatter:_,children:(0,c.jsx)(b.b,{data:l,children:(0,c.jsx)(y.N,{dataKey:"close",stroke:"#8884d8",dot:!1,type:"monotone"})}),onChange:o,startIndex:null!==s.startIndex?s.startIndex:0,endIndex:null!==s.endIndex?s.endIndex:Math.max(0,l.length-1),key:`brush-${l.length}-${s.startIndex}-${s.endIndex}`},M="candlestick"===t?600:500;return(0,c.jsxs)("div",{ref:L,className:"chart-wrapper",style:{marginTop:"20px",width:"100%"},children:[(0,c.jsxs)("div",{className:"chart-header",children:[(0,c.jsx)("h3",{children:`${d} - ${"line"===t?"Line Chart (Close Price)":"Candlestick Chart"}`}),(0,c.jsx)("div",{className:"chart-actions-header",children:(0,c.jsx)("button",{onClick:async()=>{if(L.current)try{const e=L.current.querySelector(".buy-button-on-graph");let t="";e&&(t=e.style.display,e.style.display="none");const a=await r()(L.current,{useCORS:!0,allowTaint:!0});e&&(e.style.display=t),h(a)}catch(e){console.error("Error taking screenshot:",e),alert("Could not take screenshot.")}},className:"action-button screenshot-button",title:"Download Chart",children:(0,c.jsx)($.p5B,{})})}),(0,c.jsx)("br",{}),(0,c.jsxs)("button",{onClick:m,className:"action-button buy-button-on-graph",children:["Buy ",u.toUpperCase()]})]}),(0,c.jsx)("div",{className:"chart-render-area-container",style:{position:"relative",width:"100%",height:M},onWheel:i,children:(0,c.jsx)("div",{className:"chart-render-area",style:{width:"100%",height:"100%"},children:(0,c.jsx)(v.u,{children:"line"===t?(0,c.jsxs)(b.b,{data:a,margin:{top:5,right:30,left:20,bottom:50},children:[(0,c.jsx)(j.d,{strokeDasharray:"3 3"}),(0,c.jsx)(f.W,{...F}),(0,c.jsx)(C.h,{domain:["auto","auto"]}),(0,c.jsx)(N.m,{content:(0,c.jsx)(x,{})}),(0,c.jsx)(k.s,{}),(0,c.jsx)(y.N,{type:"monotone",dataKey:"close",stroke:"#9887FF",dot:!1,name:"Close Price"}),(0,c.jsx)(S.v,{...T})]}):(0,c.jsxs)(D.X,{data:a,margin:{top:5,right:30,left:20,bottom:80},children:[(0,c.jsx)(j.d,{strokeDasharray:"3 3"}),(0,c.jsx)(f.W,{...F,scale:"band"}),(0,c.jsx)(C.h,{yAxisId:"price",domain:["auto","auto"],label:{value:"Stock Price ($)",angle:-90,position:"insideLeft"}}),(0,c.jsx)(C.h,{yAxisId:"volume",orientation:"right",domain:["auto","auto"],label:{value:"Volume",angle:90,position:"insideRight"}}),(0,c.jsx)(N.m,{content:(0,c.jsx)(g,{})}),(0,c.jsx)(k.s,{verticalAlign:"top",wrapperStyle:{paddingBottom:"10px"}}),(0,c.jsx)(w.X,{yAxisId:"price",dataKey:"close",name:"OHLC",shape:(0,c.jsx)(p,{})}),(0,c.jsx)(A.y,{yAxisId:"volume",dataKey:"volume",name:"Volume",barSize:20,children:a.map(((e,t)=>(0,c.jsx)(I.f,{fill:null!=e.close&&null!=e.open&&e.close>=e.open?"rgba(0, 204, 150, 0.5)":"rgba(239, 85, 59, 0.5)"},`cell-${t}`)))}),(0,c.jsx)(S.v,{...T,yAxisId:"price"})]})})})})]})},_=e=>{let{isTimeSeriesApi:t,chartDataLength:a,chartType:n,onChartTypeChange:l,brushDomain:s,onResetZoom:r}=e;if(!t||0===a)return null;const o=null!==s.startIndex||null!==s.endIndex,i=a>0&&(0!==s.startIndex||s.endIndex!==a-1),d=o&&i;return(0,c.jsxs)("div",{className:"chart-controls",style:{margin:"20px 0",textAlign:"center"},children:[(0,c.jsx)("h4",{children:"Chart Type:"}),[{type:"none",label:"None"},{type:"line",label:"Line (Standard)"},{type:"candlestick",label:"Candlestick (Technical)"}].map((e=>(0,c.jsx)("button",{onClick:()=>l(e.type),className:"chart-type-button "+(n===e.type?"active":""),disabled:n===e.type,style:{marginRight:"10px"},children:e.label},e.type))),d&&(0,c.jsx)("button",{onClick:r,className:"action-button",style:{marginLeft:"20px"},children:"Reset Zoom"})]})},F=e=>{let{isOpen:t,onClose:a,symbol:l,currentPrice:s,onSubmit:r}=e;const[o,i]=(0,n.useState)(1),[d,u]=(0,n.useState)(0);if((0,n.useEffect)((()=>{u(s&&o>0?s*o:0)}),[o,s]),(0,n.useEffect)((()=>{t&&i(1)}),[t]),!t)return null;return(0,c.jsx)("div",{className:"modal-overlay",onClick:a,children:(0,c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsxs)("h3",{children:["Buy Stock: ",null===l||void 0===l?void 0:l.toUpperCase()]}),(0,c.jsx)("button",{className:"modal-close-btn",onClick:a,children:"\xd7"})]}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o>0&&r(o)},children:[(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsxs)("div",{className:"price-info",children:[(0,c.jsx)("span",{children:"Current Price:"}),(0,c.jsxs)("span",{className:"price-value",children:["$",s?s.toFixed(2):"N/A"]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"quantity",children:"Quantity:"}),(0,c.jsx)("input",{id:"quantity",type:"number",value:o,onChange:e=>{const t=parseInt(e.target.value,10);i(t>0?t:1)},min:"1",autoFocus:!0})]}),(0,c.jsxs)("div",{className:"total-cost-info",children:[(0,c.jsx)("span",{children:"Estimated Total:"}),(0,c.jsxs)("span",{className:"total-cost-value",children:["$",d.toFixed(2)]})]})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:!o||o<=0,children:"Confirm Purchase"})]})]})]})})},T="http://43.204.120.102:3308",M=[{value:"globalQuote",label:"Global Quote"},{value:"intraday",label:"Intraday Data"},{value:"daily",label:"Daily Data"},{value:"dailyAdjusted",label:"Daily Adjusted Data"},{value:"weekly",label:"Weekly Data"},{value:"weeklyAdjusted",label:"Weekly Adjusted Data"},{value:"monthly",label:"Monthly Data"},{value:"monthlyAdjusted",label:"Monthly Adjusted Data"}],E={globalQuote:"quote",intraday:"intraday",daily:"daily",dailyAdjusted:"daily-adjusted",weekly:"weekly",weeklyAdjusted:"weekly-adjusted",monthly:"monthly",monthlyAdjusted:"monthly-adjusted"},P=e=>{if(null==e||""===String(e).trim())return"-";if("string"===typeof e&&e.includes("-")&&(10===e.length||19===e.length))return e;const t=parseFloat(String(e).replace(/,/g,""));return isNaN(t)?String(e):t.toLocaleString()},R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(null==e||""===String(e).trim())return"-";const a=parseFloat(String(e).replace(/,/g,""));return isNaN(a)?String(e):a.toFixed(t)},O={Volume:P,Timestamp:P,Date:P,"Dividend Amt":e=>R(e,4),"Split Coeff.":e=>R(e,1),default:e=>R(e,2)},B=e=>t=>{const a=t&&"object"===typeof t&&"value"in t?t.value:t;if(null==a)return"VALUE_UNDEF_OR_NULL";try{return(O[e]||O.default)(a)}catch(n){return console.error(`[DebugCellRenderer - ${e}] Error formatting value "${a}":`,n),"FORMAT_ERR"}},H=e=>{const{cx:t,payload:a,yAxis:n,xAxis:l,index:s}=e;if(!n||!a||!l||!l.scale||!n.scale)return null;const{open:r,high:o,low:i,close:d}=a;if([r,o,i,d].some((e=>"number"!==typeof e||isNaN(e))))return null;const u=n.scale(r),h=n.scale(o),m=n.scale(i),p=n.scale(d),x=d>=r?"#00CC96":"#EF553B";let g=5;"function"===typeof l.bandwidth?g=l.bandwidth():l.domain&&Array.isArray(l.domain)&&l.width&&(g=l.width/(l.domain.length||1));const b=Math.max(2,.6*g||5);return(0,c.jsxs)("g",{children:[(0,c.jsx)("line",{x1:t,y1:h,x2:t,y2:m,stroke:x,strokeWidth:1}),(0,c.jsx)("rect",{x:t-b/2,y:Math.min(u,p),width:b,height:Math.max(1,Math.abs(u-p)),fill:x})]},`candle-${s||t}`)},U=e=>{let{active:t,payload:a,label:n}=e;if(t&&a&&a.length){const e=a[0].payload;return(0,c.jsxs)("div",{className:"custom-recharts-tooltip",children:[(0,c.jsx)("p",{className:"recharts-tooltip-label",children:n?new Date(n).toLocaleDateString():""}),(0,c.jsxs)("ul",{className:"recharts-tooltip-item-list",style:{listStyleType:"none",padding:0,margin:0},children:[null!=e.open&&(0,c.jsx)("li",{children:`Open: ${R(e.open)}`}),null!=e.high&&(0,c.jsx)("li",{children:`High: ${R(e.high)}`}),null!=e.low&&(0,c.jsx)("li",{children:`Low: ${R(e.low)}`}),null!=e.close&&(0,c.jsx)("li",{children:`Close: ${R(e.close)}`}),null!=e.volume&&(0,c.jsx)("li",{children:`Volume: ${P(e.volume)}`})]})]})}return null},q=e=>{let{active:t,payload:a,label:n}=e;if(t&&a&&a.length){var l,s;const e=(null===(l=a.find((e=>"OHLC"===e.name)))||void 0===l?void 0:l.payload)||(null===(s=a[0])||void 0===s?void 0:s.payload);return e?(0,c.jsxs)("div",{className:"custom-recharts-tooltip",children:[(0,c.jsx)("p",{className:"recharts-tooltip-label",children:n?new Date(n).toLocaleDateString():""}),(0,c.jsxs)("ul",{className:"recharts-tooltip-item-list",style:{listStyleType:"none",padding:0,margin:0},children:[null!=e.open&&(0,c.jsx)("li",{children:`Open: ${R(e.open)}`}),null!=e.high&&(0,c.jsx)("li",{children:`High: ${R(e.high)}`}),null!=e.low&&(0,c.jsx)("li",{children:`Low: ${R(e.low)}`}),null!=e.close&&(0,c.jsx)("li",{children:`Close: ${R(e.close)}`}),null!=e.volume&&(0,c.jsx)("li",{children:`Volume: ${P(e.volume)}`})]})]}):null}return null};const V=()=>{var e;const t=(0,l.Zp)(),[a,s]=(0,n.useState)(!1),[r,o]=(0,n.useState)(null),[b]=(0,n.useState)(localStorage.getItem("authToken")),[y,v]=(0,n.useState)(!1),[j,f]=(0,n.useState)(M[0].value),[C,N]=(0,n.useState)("AAPL"),[k,S]=(0,n.useState)("5min"),[D,w]=(0,n.useState)("compact"),[A,I]=(0,n.useState)("line"),{data:$,loading:O,error:V,makeRequest:W,clear:Z}=i(b),Q=!["globalQuote"].includes(j),z=(0,n.useMemo)((()=>{if(null===$||void 0===$||!$.data||!Q||!Array.isArray($.data)||0===$.data.length)return[];const e="intraday"===j?"timestamp":"date";return $.data.filter((t=>null!=(null===t||void 0===t?void 0:t[e]))).map((t=>({date:t[e],open:null!=t.open?parseFloat(t.open):null,high:null!=t.high?parseFloat(t.high):null,low:null!=t.low?parseFloat(t.low):null,close:null!=t.close?parseFloat(t.close):null,volume:null!=t.volume?parseInt(t.volume,10):null}))).sort(((e,t)=>new Date(e.date)-new Date(t.date)))}),[$,Q,j]),{brushDomain:K,handleBrushUpdate:G,handleWheelZoom:X,resetZoom:Y,setBrushDomain:J}=d(z);(0,n.useEffect)((()=>{z.length>0&&Y()}),[z]);const ee=(0,n.useMemo)((()=>{if(null!==K.startIndex&&null!==K.endIndex&&z.length>0){const e=Math.max(0,K.startIndex),t=Math.min(z.length-1,K.endIndex);if(e<=t)return z.slice(e,t+1)}return z}),[z,K]);(0,n.useEffect)((()=>{b||console.warn("[InvestmentTools] No authentication token found."),v(!0)}),[b]);const te=()=>{const e="intraday"===j?"Timestamp":"Date",t=[{Header:e,accessor:"intraday"===j?"timestamp":"date",Cell:B(e)},{Header:"Open",accessor:"open",Cell:B("Open")},{Header:"High",accessor:"high",Cell:B("High")},{Header:"Low",accessor:"low",Cell:B("Low")},{Header:"Close",accessor:"close",Cell:B("Close")}],a={Header:"Volume",accessor:"volume",Cell:B("Volume")},n={Header:"Adjusted Close",accessor:"adjustedClose",Cell:B("Adjusted Close")},l={Header:"Dividend Amt",accessor:"dividendAmount",Cell:B("Dividend Amt")},s={Header:"Split Coeff.",accessor:"splitCoefficient",Cell:B("Split Coeff.")};if(!Q)return[];let r=[...t];return j.includes("Adjusted")&&r.push(n),r.push(a),j.includes("Adjusted")&&r.push(l),"dailyAdjusted"===j&&r.push(s),r},ae=()=>{var e,t,a;const n=(null===(e=M.find((e=>e.value===j)))||void 0===e?void 0:e.label)||"Data";let l=C;"globalQuote"===j&&null!==$&&void 0!==$&&$.symbol?l=$.symbol:null!==$&&void 0!==$&&null!==(t=$.metaData)&&void 0!==t&&t["2. Symbol"]&&(l=$.metaData["2. Symbol"]);let s=`${n} for ${l.toUpperCase()}`;return"intraday"===j&&null!==$&&void 0!==$&&null!==(a=$.metaData)&&void 0!==a&&a["4. Interval"]&&(s+=` (${$.metaData["4. Interval"]})`),s},ne=()=>{let e=null;const t=(null===ee||void 0===ee?void 0:ee.length)>0?ee[ee.length-1]:null;if("globalQuote"===j&&null!==$&&void 0!==$&&$.price)e=parseFloat($.price);else if(t&&null!=t.close)e=parseFloat(t.close);else if((null===z||void 0===z?void 0:z.length)>0){const t=z[z.length-1];t&&null!=t.close&&(e=parseFloat(t.close))}null!=e?(o(e),s(!0)):alert(`Could not determine the current price for ${C.toUpperCase()}.`)},le=e=>{const t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t;const n=C.replace(/[^a-z0-9]/gi,"_").toLowerCase();a.download=`${n}_${A}_chart_${(new Date).toISOString().split("T")[0]}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a)};return y?b||["/login","/register"].includes(window.location.pathname)?(0,c.jsxs)("div",{className:"dashboard-page investment-tools-page",children:[(0,c.jsxs)("div",{className:"main-content-investment-tool",children:[(0,c.jsx)(g.A,{}),(0,c.jsxs)("div",{className:"tool-container",children:[(0,c.jsx)("h2",{children:"Investment Tool"}),(0,c.jsx)("div",{className:"api-selector",children:(0,c.jsx)("select",{id:"api-select",value:j,onChange:e=>{return t=e.target.value,f(t),Z(),I("line"),N("monthly"===t||"monthlyAdjusted"===t?"IBM":"AAPL"),S("5min"),w("compact"),void J({startIndex:null,endIndex:null});var t},children:M.map((e=>(0,c.jsx)("option",{value:e.value,children:e.label},e.value)))})}),(0,c.jsx)(x,{fields:(()=>{const e=[{name:"symbol",label:"Stock Symbol",defaultValue:C,placeholder:"e.g., AAPL or IBM"}];return"intraday"===j?e.push({name:"interval",label:"Interval",defaultValue:k,placeholder:"1min, 5min, 15min, 30min, 60min"}):["daily","dailyAdjusted"].includes(j)&&e.push({name:"outputsize",label:"Output Size",defaultValue:D,placeholder:"compact or full"}),e})(),onSubmit:e=>{var t;if(!b)return void console.error("[InvestmentTools] Auth token or Base URL missing.");I("line");const a=(null===(t=e.symbol)||void 0===t?void 0:t.trim().toUpperCase())||C;N(a);let n=`/${E[j]}/${a}`;if("intraday"===j){var l;const t=(null===(l=e.interval)||void 0===l?void 0:l.trim())||k;S(t),n+=`/${t}`}else if(["daily","dailyAdjusted"].includes(j)){var s;const t=(null===(s=e.outputsize)||void 0===s?void 0:s.trim())||D;w(t),n+=`/${t}`}E[j]?(J({startIndex:null,endIndex:null}),W(`${T}/api/market${n}`)):console.error("[InvestmentTools] Unknown API type:",j)},isLoading:O,buttonText:`Fetch ${(null===(e=M.find((e=>e.value===j)))||void 0===e?void 0:e.label)||"Data"}`},j),(0,c.jsx)("div",{className:"data-display-area",children:(()=>{if(O)return(0,c.jsx)(m,{});if(V)return(0,c.jsx)(p,{message:V});if(!$)return(0,c.jsx)("p",{className:"no-data-message",children:"Select API and parameters to fetch data."});if("globalQuote"===j){if(!$||0===Object.keys($).length)return(0,c.jsx)("p",{className:"no-data-message",children:"No Global Quote data."});const e=Object.fromEntries(Object.entries({Symbol:$.symbol,Open:$.open,High:$.high,Low:$.low,Price:$.price,Volume:$.volume,"Latest Trading Day":$.latestTradingDay,"Previous Close":$.previousClose,Change:$.change,"Change Percent":$.changePercent}).map((e=>{let[t,a]=e;return"Volume"===t?[t,P(a)]:["Latest Trading Day","Symbol","Change Percent"].includes(t)?[t,null==a?"-":a]:[t,R(a,2)]})));return(0,c.jsx)(u,{title:ae(),data:e})}const e=Array.isArray($.data)?$.data.filter((e=>null!=e)):[];return(0,c.jsxs)(c.Fragment,{children:[$.metaData&&(0,c.jsx)(u,{title:"Metadata",data:$.metaData}),Q&&z.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(_,{isTimeSeriesApi:Q,chartDataLength:z.length,chartType:A,onChartTypeChange:I,brushDomain:K,onResetZoom:Y}),(0,c.jsx)(L,{chartType:A,displayedChartData:ee,chartData:z,brushDomain:K,onBrushUpdate:G,onWheelZoom:X,chartBaseTitle:ae().replace(" for "," Chart for "),symbol:C,onScreenshot:le,onBuyNow:ne,candlestickShapeComponent:H,customLineTooltipComponent:U,customCandlestickTooltipComponent:q}),(0,c.jsx)(h,{columns:te(),data:e,itemsPerPage:15,title:ae()})]}):Q&&(0,c.jsx)("p",{className:"no-data-message",children:"No time series data available for the selected parameters, or chart type is 'None'."}),!Q&&!$.data&&(0,c.jsx)("p",{className:"no-data-message",children:"No data available for the selected API."})]})})()})]})]}),(0,c.jsx)(F,{isOpen:a,onClose:()=>s(!1),symbol:C,currentPrice:r,onSubmit:e=>{if(!r||e<=0)return void alert("Cannot proceed with purchase due to invalid price or quantity.");const a=e*r,n={symbol:C.toUpperCase(),quantity:e,price:r,totalCost:a};console.log("Navigating to payment page with details:",n),t("/dashboard/payment",{state:{purchaseDetails:n}})}})]}):(0,c.jsxs)("div",{className:"dashboard-page investment-tools-page",children:[(0,c.jsx)(g.A,{}),(0,c.jsxs)("div",{className:"auth-message-container",style:{padding:"20px",textAlign:"center"},children:[(0,c.jsx)("h2",{children:"Access Denied"}),(0,c.jsx)(p,{message:"You need to be logged in to use the Investment Tools."})]})]}):(0,c.jsx)(m,{})}},7956:(e,t,a)=>{e.exports=a.p+"static/media/logo3.53e806f77f8987aa2fc1.png"}}]);
//# sourceMappingURL=224.33bc1d95.chunk.js.map