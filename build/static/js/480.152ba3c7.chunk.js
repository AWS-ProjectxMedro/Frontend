"use strict";(self.webpackChunkthecapitaltree=self.webpackChunkthecapitaltree||[]).push([[480],{1256:(e,a,s)=>{s.d(a,{A:()=>o});var r=s(5043),t=s(3216),i=s(5475),n=s(7956),d=s(184),l=s(579);const o=e=>{let{onLogout:a}=e;const[s,o]=(0,r.useState)(!1),c=(0,t.Zp)(),m=()=>{o(!s)},h=()=>{s&&o(!1)};return(0,r.useEffect)((()=>{if(s){const e=()=>o(!1);return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}}),[s]),(0,l.jsxs)("div",{className:"dashboard-container-wrapper "+(s?"mobile-sidebar-open":""),children:[(0,l.jsx)("button",{className:"dashboard__sidebar-toggle",onClick:m,"aria-label":"Toggle navigation","aria-expanded":s,children:s?(0,l.jsx)(d.QCr,{}):(0,l.jsx)(d.OXb,{})}),(0,l.jsxs)("aside",{className:"dashboard__sidebar "+(s?"is-open":""),children:[(0,l.jsxs)("div",{className:"dashboard__sidebar-logo",children:[(0,l.jsx)("img",{src:n,alt:"logo",height:"50px",width:"50px"}),(0,l.jsx)("h2",{className:"dashboard__sidebar-title",children:"Dashboard"})]}),(0,l.jsxs)("ul",{className:"dashboard__sidebar-menu",children:[(0,l.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,l.jsx)(i.k2,{to:"/dashboard",end:!0,onClick:h,className:e=>{let{isActive:a}=e;return a?"dashboard__sidebar-menu-item--active":""},children:"Dashboard"})}),(0,l.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,l.jsx)(i.k2,{to:"/dashboard/investmenttools",onClick:h,className:e=>{let{isActive:a}=e;return a?"dashboard__sidebar-menu-item--active":""},children:"Investment Tool"})}),(0,l.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,l.jsx)(i.k2,{to:"/dashboard/marketguides",onClick:h,className:e=>{let{isActive:a}=e;return a?"dashboard__sidebar-menu-item--active":""},children:"Market Guides"})}),(0,l.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,l.jsx)(i.k2,{to:"/dashboard/profile",onClick:h,className:e=>{let{isActive:a}=e;return a?"dashboard__sidebar-menu-item--active":""},children:"Profile"})}),(0,l.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,l.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),h(),c("/dashboard/payment",{state:{isManualPayment:!0,purchaseDetails:null}})},className:"dashboard__sidebar-menu-link",children:"Payment"})}),(0,l.jsx)("li",{className:"dashboard__sidebar-menu-item",children:(0,l.jsx)(i.k2,{to:"/dashboard/withdrawal",onClick:h,className:e=>{let{isActive:a}=e;return a?"dashboard__sidebar-menu-item--active":""},children:"Withdrawal"})}),(0,l.jsx)("li",{className:"dashboard__sidebar-signout",onClick:()=>{"function"===typeof a?a():(console.error("Sidebar: onLogout prop is missing or not a function!"),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),window.location.href="/login"),h()},style:{cursor:"pointer"},children:"Sign Out"})]})]}),s&&(0,l.jsx)("div",{className:"dashboard__sidebar-overlay",onClick:m})]})}},5480:(e,a,s)=>{s.r(a),s.d(a,{default:()=>l});var r=s(5043),t=s(3216),i=s(6213),n=s(1256),d=s(579);const l=()=>{const e=(0,t.zy)(),a=(0,t.Zp)(),[s]=(0,r.useState)(localStorage.getItem("authToken")),{purchaseDetails:l,isManualPayment:o}=e.state||{},[c,m]=(0,r.useState)({amount:(null===l||void 0===l?void 0:l.totalCost)||"",symbol:(null===l||void 0===l?void 0:l.symbol)||"",quantity:(null===l||void 0===l?void 0:l.quantity)||"",price:(null===l||void 0===l?void 0:l.price)||"",paymentMethod:"credit_card",cardNumber:"",expiryDate:"",cvv:"",cardHolderName:"",upiId:"",description:""}),[h,u]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),[b,y]=(0,r.useState)("");(0,r.useEffect)((()=>{l&&!o?m((e=>({...e,description:`Purchase of ${l.quantity} shares of ${l.symbol} at \u20b9${l.price} per share`}))):o&&m((e=>({...e,description:"Manual payment"})))}),[l,o]);const j=e=>{const{name:a,value:s}=e.target;m((e=>({...e,[a]:s})))},v="credit_card"===c.paymentMethod||"debit_card"===c.paymentMethod,g="upi"===c.paymentMethod;return(0,d.jsxs)("div",{className:"dashboard-page payment-page",children:[(0,d.jsx)(n.A,{}),(0,d.jsxs)("div",{className:"payment-container",children:[(0,d.jsx)("h2",{children:"Payment Processing"}),(0,d.jsx)("div",{className:"payment-type-indicator",children:o?(0,d.jsxs)("div",{className:"manual-payment-info",children:[(0,d.jsx)("h3",{children:"Manual Payment"}),(0,d.jsx)("p",{children:"Enter your payment details below"})]}):l?(0,d.jsxs)("div",{className:"stock-purchase-info",children:[(0,d.jsx)("h3",{children:"Stock Purchase Payment"}),(0,d.jsxs)("div",{className:"purchase-summary",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Symbol:"})," ",l.symbol]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Quantity:"})," ",l.quantity," shares"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Price per share:"})," \u20b9",l.price]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Total Cost:"})," \u20b9",l.totalCost]})]})]}):(0,d.jsxs)("div",{className:"no-details-info",children:[(0,d.jsx)("h3",{children:"Payment"}),(0,d.jsx)("p",{children:"Please enter your payment details"})]})}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),x(""),y("");try{const e=await i.A.post("http://43.204.120.102:3308/api/payment/process",{...c,purchaseType:o?"manual":"stock_purchase",purchaseDetails:l||null},{headers:{Authorization:`Bearer ${s}`}});e.data.success?(y("Payment processed successfully!"),setTimeout((()=>a("/dashboard")),2e3)):x(e.data.message||"Payment failed")}catch(n){var r,t;const e=(null===(r=n.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||"Payment processing failed";x(e)}finally{u(!1)}},className:"payment-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"amount",children:"Amount (\u20b9)"}),(0,d.jsx)("input",{id:"amount",type:"number",name:"amount",value:c.amount,onChange:j,required:!0,disabled:!o&&l})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"paymentMethod",children:"Payment Method"}),(0,d.jsxs)("select",{id:"paymentMethod",name:"paymentMethod",value:c.paymentMethod,onChange:j,required:!0,children:[(0,d.jsx)("option",{value:"credit_card",children:"Credit Card"}),(0,d.jsx)("option",{value:"debit_card",children:"Debit Card"}),(0,d.jsx)("option",{value:"upi",children:"UPI"})]})]}),v&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"cardHolderName",children:"Card Holder Name"}),(0,d.jsx)("input",{id:"cardHolderName",type:"text",name:"cardHolderName",value:c.cardHolderName,onChange:j,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"cardNumber",children:"Card Number"}),(0,d.jsx)("input",{id:"cardNumber",type:"text",name:"cardNumber",value:c.cardNumber,onChange:j,placeholder:"1234 5678 9012 3456",maxLength:"19",required:!0})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"expiryDate",children:"Expiry Date"}),(0,d.jsx)("input",{id:"expiryDate",type:"text",name:"expiryDate",value:c.expiryDate,onChange:j,placeholder:"MM/YY",maxLength:"5",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"cvv",children:"CVV"}),(0,d.jsx)("input",{id:"cvv",type:"text",name:"cvv",value:c.cvv,onChange:j,maxLength:"4",required:!0})]})]})]}),g&&(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{htmlFor:"upiId",children:"UPI ID"}),(0,d.jsx)("input",{id:"upiId",type:"text",name:"upiId",value:c.upiId,onChange:j,placeholder:"yourname@paytm / yourname@phonepe / yourname@gpay",required:!0}),(0,d.jsx)("small",{className:"form-help-text",children:"Enter your UPI ID (e.g., yourname@paytm, yourname@phonepe, yourname@gpay)"})]}),p&&(0,d.jsx)("div",{className:"error-message",children:p}),b&&(0,d.jsx)("div",{className:"success-message",children:b}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>a("/dashboard"),className:"btn btn-secondary",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:h,className:"btn btn-primary",children:h?"Processing...":"Process Payment"})]})]})]})]})}},7956:(e,a,s)=>{e.exports=s.p+"static/media/logo3.53e806f77f8987aa2fc1.png"}}]);
//# sourceMappingURL=480.152ba3c7.chunk.js.map